<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title data-i18n="title.page">End-to-End Encryption | Health eRecords</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    /* KEEP ALL YOUR EXISTING CSS EXACTLY AS-IS */
  </style>
</head>

<body>
  <div class="page-wrapper">

    <header>
      <div class="brand">
        <img class="brand-icon"
             src="https://opalbvplplmknjqltwfa.supabase.co/storage/v1/object/public/public-site/icon.png"
             alt="Health eRecords">
        <div>
          <div class="brand-text-main">Health eRecords</div>
          <div class="brand-text-sub" data-i18n="brand.tagline">
            Your health. Your data. Your control.
          </div>
        </div>
      </div>

      <div class="pill">
        <span class="pill-dot"></span>
        <span data-i18n="pill.title">End-to-End Encryption</span>
      </div>
    </header>

    <!-- ðŸŒ Language Switch -->
    <div style="margin-bottom:16px">
      <button onclick="setLang('en')">EN</button>
      <button onclick="setLang('es')">ES</button>
      <button onclick="setLang('fr')">FR</button>
      <button onclick="setLang('it')">IT</button>
    </div>

    <!-- ðŸ”— Global Legal Navigation -->
    <nav class="legal-nav">
      <a data-nav="privacy" href="privacy.html">Privacy Policy</a>
      <a data-nav="terms" href="terms.html">Terms</a>
      <a data-nav="hipaa" href="hipaa.html">HIPAA Notice</a>
      <a data-nav="security" href="security.html">Security</a>
      <a data-nav="e2ee" href="end-to-end-encryption.html">End-to-End Encryption</a>
      <a data-nav="support" href="support.html">Support</a>
    </nav>

    <main class="layout">
      <section class="card">
        <h1 data-i18n="heading.title">End-to-End Encryption</h1>

        <div class="meta-row">
          <div class="meta-item">
            <span class="meta-label" data-i18n="meta.effective">Effective:</span>
            <span data-i18n="meta.date">November 21, 2025</span>
          </div>
          <div class="meta-item">
            <span class="meta-label" data-i18n="meta.contact">Contact:</span>
            <a href="mailto:apd1034@gmail.com">apd1034@gmail.com</a>
          </div>
        </div>

        <p data-i18n="body.intro"></p>

        <ul>
          <li data-i18n="list.onDevice"></li>
          <li data-i18n="list.recipientOnly"></li>
          <li data-i18n="list.keyProtection"></li>
          <li data-i18n="list.metadata"></li>
          <li data-i18n="list.sharing"></li>
        </ul>

        <p data-i18n="body.footer"></p>
      </section>

      <aside class="side-card">
        <div class="side-title" data-i18n="side.title">Highlights</div>
        <p class="side-text" data-i18n="side.subtitle"></p>
        <ul class="side-list">
          <li><span class="side-bullet"></span><span data-i18n="side.b1"></span></li>
          <li><span class="side-bullet"></span><span data-i18n="side.b2"></span></li>
          <li><span class="side-bullet"></span><span data-i18n="side.b3"></span></li>
          <li><span class="side-bullet"></span><span data-i18n="side.b4"></span></li>
        </ul>
      </aside>
    </main>

    <footer>
      Health eRecords Â·
      <span data-i18n="footer.support">Support:</span>
      <a class="link-soft" href="mailto:apd1034@gmail.com">apd1034@gmail.com</a>
    </footer>

  </div>

<script>
/* ===============================
   TRANSLATIONS
================================ */
const translations = {
  en: {
    "title.page": "End-to-End Encryption | Health eRecords",
    "brand.tagline": "Your health. Your data. Your control.",
    "pill.title": "End-to-End Encryption",
    "heading.title": "End-to-End Encryption",
    "meta.effective": "Effective:",
    "meta.date": "November 21, 2025",
    "meta.contact": "Contact:",
    "body.intro": "End-to-end encryption (E2EE) means message content is encrypted on your device and can only be decrypted by the intended recipients.",
    "list.onDevice": "On-device encryption: content is encrypted before it leaves your device.",
    "list.recipientOnly": "Recipient-only decryption: only authorized recipients can decrypt the content.",
    "list.keyProtection": "Key protection: encryption keys are protected and not shown in the UI.",
    "list.metadata": "Metadata limits: message content is encrypted, some metadata may remain.",
    "list.sharing": "Sharing control: access depends on doctor/patient authorization.",
    "body.footer": "Encrypted content is treated as opaque data during transport and storage.",
    "side.title": "Highlights",
    "side.subtitle": "Private by design.",
    "side.b1": "Message content stays encrypted.",
    "side.b2": "Recipient-only access.",
    "side.b3": "Reduced exposure.",
    "side.b4": "Authorization enforced.",
    "footer.support": "Support:"
  },
  es: {
    "title.page": "Cifrado de extremo a extremo | Health eRecords",
    "brand.tagline": "Tu salud. Tus datos. Tu control.",
    "pill.title": "Cifrado de extremo a extremo",
    "heading.title": "Cifrado de extremo a extremo",
    "meta.effective": "Vigente:",
    "meta.date": "21 de noviembre de 2025",
    "meta.contact": "Contacto:",
    "body.intro": "El cifrado de extremo a extremo significa que el contenido se cifra en tu dispositivo.",
    "list.onDevice": "Cifrado en el dispositivo antes de enviarse.",
    "list.recipientOnly": "Solo los destinatarios autorizados pueden descifrarlo.",
    "list.keyProtection": "Las claves estÃ¡n protegidas.",
    "list.metadata": "Algunos metadatos pueden existir.",
    "list.sharing": "El acceso depende de autorizaciones.",
    "body.footer": "El contenido cifrado se maneja como datos opacos.",
    "side.title": "Aspectos clave",
    "side.subtitle": "Privacidad desde el diseÃ±o.",
    "side.b1": "Contenido cifrado.",
    "side.b2": "Acceso limitado.",
    "side.b3": "Menor exposiciÃ³n.",
    "side.b4": "AutorizaciÃ³n aplicada.",
    "footer.support": "Soporte:"
  }
};

/* ===============================
   LANGUAGE HANDLING
================================ */
function getLangFromUrl() {
  return new URLSearchParams(window.location.search).get("lang");
}

function setLang(lang) {
  localStorage.setItem("lang", lang);
  document.documentElement.lang = lang;

  document.querySelectorAll("[data-i18n]").forEach(el => {
    const key = el.dataset.i18n;
    if (translations[lang]?.[key]) {
      el.textContent = translations[lang][key];
    }
  });

  // ðŸ”— Update nav links to keep ?lang=
  document.querySelectorAll(".legal-nav a").forEach(link => {
    const url = new URL(link.getAttribute("href"), window.location.origin);
    url.searchParams.set("lang", lang);
    link.setAttribute("href", url.pathname + url.search);
  });
}

const initialLang = getLangFromUrl() || localStorage.getItem("lang") || "en";
setLang(initialLang);
</script>

</body>
</html>
